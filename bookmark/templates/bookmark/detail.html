{% extends "bookmark/base.html" %}
{% load widget_tweaks %}
{% load form_fields %}
{% block content %}
  <div class="flex flex-col lg:flex-row gap-4">
    <img src="/media/{{ form.instance.og_image }}"
         alt=""
         class="object-contain h-full lg:w-3/4 rounded-lg">
    <div class="w-full lg:w-1/4 mx-auto flex flex-col gap-4">
      <form method="post" class="flex flex-col gap-4">
        {% csrf_token %}
        {% floating_label_input form.url %}
        {% floating_label_input form.title %}
        {% floating_label_input form.folder %}
        {% floating_label_input form.new_folder %}
        {% floating_label_input form.category %}
        {% floating_label_input form.new_category %}
        {% floating_label_input form.tags %}
        {% floating_label_input form.new_tags %}
        {% floating_label_input form.description %}
        <button type="submit"
                class="py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-blue-600 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700 dark:focus:bg-gray-700 dark:text-blue-500">
          変更
        </button>
      </form>
      <div class="flex flex-col gap-4">
        <button id="openDeleteModal"
                class="py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-red-500 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700 dark:focus:bg-gray-700">
          削除
        </button>
      </div>
    </div>
  </div>
  <div id="deleteModal"
       class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
    <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
      <div class="mt-3 text-center">
        <h3 class="text-lg leading-6 font-medium text-gray-900">本当に削除しますか？</h3>
        <div class="mt-2 px-7 py-3">
          <p class="text-sm text-gray-500">この操作は取り消せません。</p>
        </div>
        <div class="items-center px-4 py-3">
          <form method="post"
                action="{% url 'bookmark:delete' object.pk %}"
                class="inline">
            {% csrf_token %}
            <button type="submit"
                    class="px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md w-32">削除</button>
          </form>
          <button id="cancelDelete"
                  class="px-4 py-2 bg-gray-300 text-black text-base font-medium rounded-md w-32 mr-2">キャンセル</button>
        </div>
      </div>
    </div>
  </div>
{% endblock content %}
{% block pagination %}
{% endblock pagination %}
{% block script %}
  <script>
  const deleteModal = document.getElementById('deleteModal');
  const openDeleteModal = document.getElementById('openDeleteModal');
  const cancelDelete = document.getElementById('cancelDelete');

  openDeleteModal.addEventListener('click', () => {
    deleteModal.classList.remove('hidden');
  });

  cancelDelete.addEventListener('click', () => {
    deleteModal.classList.add('hidden');
  });
  </script>
{% endblock script %}
